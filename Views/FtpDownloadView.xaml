<UserControl x:Class="StarRuptureSaveFixer.Views.FtpDownloadView"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

 <UserControl.Resources>
 <Style TargetType="Button" x:Key="ActionButton">
 <Setter Property="Padding" Value="10,5"/>
 <Setter Property="Margin" Value="5"/>
 <Setter Property="MinWidth" Value="100"/>
 <Setter Property="Cursor" Value="Hand"/>
 </Style>
 <Style TargetType="Button" x:Key="PrimaryButton">
 <Setter Property="Padding" Value="12,8"/>
 <Setter Property="Margin" Value="5"/>
 <Setter Property="MinWidth" Value="140"/>
 <Setter Property="Cursor" Value="Hand"/>
 <Setter Property="Background" Value="#2196F3"/>
 <Setter Property="Foreground" Value="White"/>
 <Setter Property="FontWeight" Value="Bold"/>
 </Style>
 <Style TargetType="TextBox" x:Key="FieldTextBox">
 <Setter Property="Padding" Value="5"/>
 <Setter Property="VerticalContentAlignment" Value="Center"/>
 </Style>
 <Style TargetType="PasswordBox" x:Key="FieldPasswordBox">
 <Setter Property="Padding" Value="5"/>
 <Setter Property="VerticalContentAlignment" Value="Center"/>
 </Style>
 </UserControl.Resources>

 <Grid Margin="10">
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="*"/>
 <RowDefinition Height="Auto"/>
 </Grid.RowDefinitions>

 <!-- FTP Settings -->
 <GroupBox Grid.Row="0" Header="FTP Server Settings" Padding="15" Margin="0,0,0,15">
 <Grid>
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="Auto"/>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="Auto"/>
 <ColumnDefinition Width="80"/>
 </Grid.ColumnDefinitions>
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 </Grid.RowDefinitions>

 <!-- Host and Port -->
 <TextBlock Grid.Row="0" Grid.Column="0" Text="Host:" VerticalAlignment="Center" Margin="0,0,10,10"/>
 <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding Host, UpdateSourceTrigger=PropertyChanged}"
 Style="{StaticResource FieldTextBox}" Margin="0,0,15,10"/>
 <TextBlock Grid.Row="0" Grid.Column="2" Text="Port:" VerticalAlignment="Center" Margin="0,0,10,10"/>
 <TextBox Grid.Row="0" Grid.Column="3" Text="{Binding Port}"
 Style="{StaticResource FieldTextBox}" Margin="0,0,0,10"/>

 <!-- Username -->
 <TextBlock Grid.Row="1" Grid.Column="0" Text="Username:" VerticalAlignment="Center" Margin="0,0,10,10"/>
 <TextBox Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3"
 Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
 Style="{StaticResource FieldTextBox}" Margin="0,0,0,10"/>

 <!-- Password -->
 <TextBlock Grid.Row="2" Grid.Column="0" Text="Password:" VerticalAlignment="Center" Margin="0,0,10,10"/>
 <PasswordBox Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3"
 x:Name="PasswordBox"
 Style="{StaticResource FieldPasswordBox}" Margin="0,0,0,10"
 PasswordChanged="PasswordBox_PasswordChanged"/>

 <!-- Remote Path with Browse Button -->
 <TextBlock Grid.Row="3" Grid.Column="0" Text="Remote Path:" VerticalAlignment="Center" Margin="0,0,10,10"/>
 <Grid Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="3" Margin="0,0,0,10">
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="Auto"/>
 </Grid.ColumnDefinitions>
 <TextBox Grid.Column="0"
 Text="{Binding RemotePath, UpdateSourceTrigger=PropertyChanged}"
 Style="{StaticResource FieldTextBox}"
 IsReadOnly="True"/>
 <Button Grid.Column="1" Content="Select Session"
 Command="{Binding BrowseRemoteCommand}"
 Style="{StaticResource ActionButton}"
 Margin="5,0,0,0"/>
 </Grid>

 <!-- Options -->
 <StackPanel Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="4" Orientation="Horizontal" Margin="0,5,0,0">
 <CheckBox Content="Use FTPS (TLS)" IsChecked="{Binding UseFtps}" VerticalAlignment="Center" Margin="0,0,20,0"/>
 <CheckBox Content="Passive Mode" IsChecked="{Binding PassiveMode}" VerticalAlignment="Center" Margin="0,0,30,0"/>
 </StackPanel>
 </Grid>
 </GroupBox>

 <!-- Download Controls -->
 <GroupBox Grid.Row="1" Header="Download Session" Padding="10">
 <Grid>
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 </Grid.RowDefinitions>

 <ProgressBar Grid.Row="0" Value="{Binding DownloadProgress, Mode=OneWay}" Minimum="0" Maximum="100" Height="25"/>

 <TextBlock Grid.Row="1" Text="{Binding DownloadStatus}" Margin="0,10,0,10"
 HorizontalAlignment="Center"/>

 <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
 <Button Content="Download Session" Command="{Binding DownloadCommand}" Style="{StaticResource PrimaryButton}"/>
 <Button Content="Cancel" Command="{Binding CancelCommand}" Style="{StaticResource ActionButton}"
 Background="#F44336" Foreground="White"
 Visibility="{Binding IsDownloading, Converter={StaticResource BoolToVisibilityConverter}}"/>
 </StackPanel>
 </Grid>
 </GroupBox>

 <!-- Footer spacer / could add more info -->
 </Grid>
</UserControl>